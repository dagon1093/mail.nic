/**/
var rcs_common=new function(){this.version="3.4";this.runBeforeReady=function(){if($("#login-form").length){$("body").addClass("login-page");$("#login-form .box-inner").prepend("<div id='company-name'>"+rcs_config_product_name+"</div>");if(!$("#login-form .boxtitle").length){$("#company-name").after("<h1>"+rcs_label_login+"</h1>")}if(typeof rcmail.env.rcs_login_branding!="undefined"&&rcmail.env.rcs_login_branding){$("#login-form h1").after("<img id='login-branding' src='"+rcmail.env.rcs_login_branding+"' alt='' />");$("#company-name").hide();$("h1").hide()}}this.initializeColors()};this.runOnReady=function(){if($("#login-form").length){if(typeof rcs_disable_login_taskbar_outgoing=="undefined"||rcs_disable_login_taskbar_outgoing==true){$(".login-page #taskbar a").each(function(){var href=$(this).attr("href");if(href&&href.substr(0,4)=="http"){$(this).remove()}})}if(typeof rcs_disable_login_logo=="undefined"||rcs_disable_login_logo!=true){$("body").append("<div id='login-logo-icon'><a href='http://roundcubeskins.net' target='_blank' id='login-logo-icon-2'></a><a href='http://roundcubeskins.net' target='_blank' title='More Roundcube skins at roundcubeskins.net' id='login-logo-icon-1'></a></div>")}}$("#mainscreen").prepend("<div id='toolbar-bg'></div>");if($("a.iconbutton").length){$("a.iconbutton").html("")}if($(".messagelist").length){}if($("#calneweventbut").length){$("body").addClass("calendar-page");rcmail.env.skin="larry"}if($("#topnav").length){$("#rcs-logo").appendTo("#topnav");if(typeof rcmail.env.rcs_frame_branding!="undefined"&&rcmail.env.rcs_frame_branding){$("#rcs-logo").attr("src",rcmail.env.rcs_frame_branding)}}if($(".plugin_calendar").length){$("#taskbar a.button-calendar").addClass("button-selected")}if($(".plugin_sticky_notes").length){$("#taskbar a.button-sticky_notes").addClass("button-selected")}if($(".plugin_planner").length){$("#taskbar a.button-planner").addClass("button-selected")}if($("#rss").length){$("#rss").appendTo("#folderlist-footer")}if(document.URL.indexOf("action=plugin.userinfo")){$("#pluginbody h4").addClass("boxtitle");$("#pluginbody table").css("margin","10px")}if($("#skin_preview").length){$(".skinitem").unbind("click");$(".skinitem").click(function(){var skinName=$(this).children().val();if(skinName=="larry"||skinName=="classic"){$("#skin_preview_img").attr("src","./plugins/settings/skins/"+skinName+"/images/"+skinName+".png")}else{$("#skin_preview_img").attr("src","./skins/"+skinName+"/preview.png")}});var selectedSkinName=false;if($(".skinitem input[type=radio]").length){selectedSkinName=$(".skinitem input:checked").val()}else{if($("#desktop-skin-select").length){selectedSkinName=$("#desktop-skin-select .skinitem input").val()}else{if($("select#rcmfd_skin").length){selectedSkinName=$("select#rcmfd_skin").val()}}}if(selectedSkinName){$("#skin_preview_img").attr("src","./skins/"+selectedSkinName+"/preview.png")}}if($("#planner_controls a").not("#today").length){$("#planner_controls a").not("#today").html("")}if($(".scheduled_sending").length){$(".scheduled_sending").text($(".scheduled_sending").attr("title"))}setTimeout(function(){if($(".button-skin-options .tooltip").length){$(".button-skin-options .tooltip").html(rcs_label_skin)}},0)};this.changeColor=function(color,save){save=typeof save!=="undefined"?save:true;var element=$("body");element.removeClass(function(index,cls){return(cls.match(/color-\S+/g)||[]).join(" ")});element.addClass("color-"+color);if(save){rcmail.save_pref({name:"rcs_skin_color_"+rcmail.env.rcs_skin,value:color})}};this.showOptions=function(element){if($("#skin-options").length){UI.show_popup("skin-options")}};this.pluginLoaded=function(){return typeof rcmail.env.rcs_skin!=="undefined"};this.mobile=function(){return rcs_common.pluginLoaded()&&rcmail.env.rcs_mobile&&rcmail.env.rcs_skin!="litecube-f"};this.initializeColors=function(){if(typeof skinColorValues=="undefined"){return}if(typeof skinColorDefault=="undefined"){skinColorDefault=skinColorValues[0][0]}if(typeof skinColorStyles=="undefined"){skinColorStyles=""}var skinStyles="";var colorValueCount=skinColorValues[0].length;for(var i=0;i<skinColorValues.length;i++){var oneColor=skinColorStyles;for(var j=0;j<colorValueCount;j++){oneColor=oneColor.replace(new RegExp("%"+(j+1),"g"),skinColorValues[i][j])}skinStyles+=oneColor}$("body").append("<style>"+skinStyles+"</style>");if(typeof rcs_disable_colors!=="undefined"&&rcs_disable_colors){rcs_common.changeColor(skinColorDefault,false);return}if(rcs_common.pluginLoaded()){if(rcs_common.mobile()){$("#topnav a.button-logout").before("<a class='button-disable_mobile_skin' href='javascript:void(0)' onclick='rcs_common.disableMobileSkin()'>"+rcs_label_disable_mobile_skin+"</a>");$("#topnav a.button-logout").after("<a class='button-skin-options' href='javascript:void(0)' onclick='rcs_mobile.popup(event, \"skin-options\")'><span style='background-color: #b0263b'></span><span style='background-color: #00860e'></span><span style='background-color: #0075c8'></span><span style='background-color: #8d2297'></span></a>")}else{$("#topnav a.button-logout").before("<a class='button-skin-options' href='javascript:void(0)' id='skin-optionslink' onclick='rcs_common.showOptions(this)'><span class='button-inner'></span></a>")}}var colorSelect="";for(var i=0;i<skinColorValues.length;i++){colorSelect+="<a class='color-box' onclick='rcs_common.changeColor(&quot;"+skinColorValues[i][0]+"&quot;)' style='background:#"+skinColorValues[i][0]+" !important'></a>";if((i+1)%6==0){colorSelect+="<br />"}}if(rcs_common.hasCookie("rcs_disable_mobile_skin")){colorSelect+="<div id='enable-mobile-skin'><input type='button' class='button mainaction' onclick='rcs_common.enableMobileSkin()' value='"+rcs_label_enable_mobile_skin+"' /></div>";$("#header .topleft").prepend("<a href='javascript:void(0)' onclick='rcs_common.enableMobileSkin()'>"+rcs_label_enable_mobile_skin+"</a>")}var optionsBox="<div id='skin-options' class='popupmenu'>"+(rcs_common.mobile()?"<h5>"+rcs_label_options+"</h5>":"")+"<div id='skin-color-select'>"+colorSelect+"</div><div class='loader'></div></div>";$("body").append(optionsBox);var prefColor=typeof rcmail.env.rcs_color!=="undefined"?rcmail.env.rcs_color:false;var color=false;for(var i=0;i<skinColorValues.length;i++){if(prefColor==skinColorValues[i][0]){color=prefColor;break}}rcs_common.changeColor(color?color:skinColorDefault,false)};this.disableMobileSkin=function(){rcs_common.setCookie("rcs_disable_mobile_skin",1,Infinity);location.reload()};this.enableMobileSkin=function(){rcs_common.removeCookie("rcs_disable_mobile_skin");location.reload()};this.getCookie=function(key){if(!key){return null}return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(key).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null};this.setCookie=function(sKey,sValue,vEnd,sPath,sDomain,bSecure){if(!sKey||/^(?:expires|max\-age|path|domain|secure)$/i.test(sKey)){return false}var sExpires="";if(vEnd){switch(vEnd.constructor){case Number:sExpires=vEnd===Infinity?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+vEnd;break;case String:sExpires="; expires="+vEnd;break;case Date:sExpires="; expires="+vEnd.toUTCString();break}}document.cookie=encodeURIComponent(sKey)+"="+encodeURIComponent(sValue)+sExpires+(sDomain?"; domain="+sDomain:"")+(sPath?"; path="+sPath:"")+(bSecure?"; secure":"");return true};this.removeCookie=function(sKey,sPath,sDomain){if(!this.hasCookie(sKey)){return false}document.cookie=encodeURIComponent(sKey)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(sDomain?"; domain="+sDomain:"")+(sPath?"; path="+sPath:"");return true};this.hasCookie=function(sKey){if(!sKey){return false}return(new RegExp("(?:^|;\\s*)"+encodeURIComponent(sKey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=")).test(document.cookie)};this.getCookieKeys=function(){var aKeys=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/);for(var nLen=aKeys.length,nIdx=0;nIdx<nLen;nIdx++){aKeys[nIdx]=decodeURIComponent(aKeys[nIdx])}return aKeys}};